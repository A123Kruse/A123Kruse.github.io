<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI or Real? — Home</title>

  <!-- Shared site-wide styles -->
  <link rel="stylesheet" href="styles/site.css">
  <!-- Preview + tooltip styles -->
  <link rel="stylesheet" href="styles/preview.css">

  <!-- Page-specific layout styles -->
  <style>
    * { box-sizing: border-box }

    .wrap { max-width: 1000px; width: 100% }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 20px;
    }

    .brand {
      font-weight: 800;
      font-size: clamp(22px,2.5vw+10px,40px);
      letter-spacing: .2px;
    }

    .sub { color: var(--muted); margin-top: 6px }

    .hero {
      background: rgba(255,255,255,.04);
      border: 1px solid var(--ring);
      border-radius: 18px;
      padding: 28px;
      display: grid;
      gap: 24px;
    }
    @media (min-width:900px) {
      .hero { grid-template-columns: 1.2fr 1fr; align-items: center }
    }

    .cta {
      display: inline-block;
      padding: 14px 22px;
      font-weight: 800;
      border-radius: 12px;
      border: 1px solid var(--ring);
      background: linear-gradient(180deg,#172031,#121a28);
      color: var(--text);
      text-decoration: none;
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
      transition: .15s;
    }
    .cta:hover { transform: translateY(-2px) }

    .howto { margin-top: 22px; display: grid; gap: 16px }
    @media (min-width:700px) { .howto { grid-template-columns: repeat(3,1fr) } }

    .step {
      background: rgba(255,255,255,.04);
      border: 1px solid var(--ring);
      border-radius: 14px;
      padding: 16px;
    }
    .step h3 { margin: 0 0 8px; font-size: 16px }

    .kbd {
      font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid var(--ring);
      background: #0c141d;
    }

    .preview { display: grid; gap: 16px }
    .cards { display: grid; grid-template-columns: 1fr 1fr; gap: 16px }

    .card {
      position: relative;
      background: var(--card);
      border: 1px solid var(--ring);
      border-radius: 14px;
      overflow: hidden;
    }

    .label {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.5);
      border: 1px solid var(--ring);
      font-size: 12px;
      text-transform: uppercase;
    }

    /* Abstract background if no <img> */
    .preview .card .frame:not(:has(img)) {
      aspect-ratio: 4/3;
      background:
        radial-gradient(circle at 30% 35%, rgba(255,255,255,.08) 0 30%, transparent 31%),
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.06) 0 26%, transparent 27%),
        linear-gradient(180deg, #0e1620, #0b1119);
      border-bottom: 1px solid var(--ring);
    }

    .ghost { position: absolute; right: 10px; bottom: 10px; font-size: 12px; color: var(--muted) }

    footer { margin-top: 18px; color: var(--muted); font-size: 12px; text-align: center }

    /* --- 9-Grid GIF Card (from the other variant, refined to match hero cards) --- */
    .evil-cta {
      display: grid;
      gap: 10px;
      margin: 6px 0 14px;
      justify-items: end;           /* right-aligned like your mock */
    }
    .evil-cta .card {
      width: min(280px, 100%);
      border-radius: 16px;
      overflow: hidden;
      position: relative;
      border: 1px solid var(--ring);
      background: var(--card);
      box-shadow: 0 6px 18px rgba(0,0,0,.32), inset 0 0 0 1px rgba(255,255,255,.03);
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .evil-cta .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 26px rgba(0,0,0,.38), 0 0 22px rgba(255, 0, 110, .25);
    }
    .evil-cta .frame {
      aspect-ratio: 4 / 3;
      display: grid; place-items: center;
      background:
        radial-gradient(circle at 30% 35%, rgba(255,255,255,.08) 0 30%, transparent 31%),
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.06) 0 26%, transparent 27%),
        linear-gradient(180deg, #0e1620, #0b1119);
      border-bottom: 1px solid var(--ring);
    }
    .evil-cta img {
      display: block; max-width: 100%; height: auto; object-fit: cover; border-radius: 8px;
      filter: contrast(1.05) saturate(1.05);
    }
    .evil-cta .cta-text { font-weight: 800; text-align: center; padding: 10px 12px 12px; letter-spacing: .3px }
  </style>
</head>

<body>
  <div class="page-wrap center-y">
    <div class="app">
      <div class="wrap">
        <header>
          <div>
            <div class="brand">AI or Real?</div>
            <div class="sub">A quick game to test whether you can spot AI-generated images.</div>
          </div>
          <a class="cta" href="game.html">Start the Game</a>
        </header>

        <section class="hero">
            <!-- Left column: how-to -->
            <div>
                <h2 style="margin:0 0 10px">How to play</h2>
                <p class="sub">You’ll see two images side-by-side. One is real, the other is AI-generated. Pick which one you think is AI.</p>

                <div class="howto">
                    <div class="step">
                        <h3>1) Look closely</h3>
                        <p class="sub">Zoom in on details like text, fingers, backgrounds, and lighting.</p>
                    </div>
                    <div class="step">
                        <h3>2) Make a call</h3>
                        <p class="sub">Click the AI image — or use <span class="kbd">A</span>/<span class="kbd">B</span> to select.</p>
                    </div>
                    <div class="step">
                        <h3>3) Reveal & score</h3>
                        <p class="sub">Press <span class="kbd">R</span> to reveal, <span class="kbd">N</span> for next round. Try to beat your best score!</p>
                    </div>
                </div>

                <p style="margin-top:18px">
                    <a class="cta" href="categories.html">Categories Explained</a>
                </p>
            </div>

            <!-- Right column: preview on top, 9-Grid below -->
            <div>
                <!-- Mini visual preview -->
                <div class="preview" aria-hidden="true">
                    <div class="cards">
                        <div class="card">
                            <div class="label">A</div>
                            <div class="frame"><span class="tooltip">This is a real photo</span></div>
                            <div class="ghost">“This is AI”</div>
                        </div>
                        <div class="card">
                            <div class="label">B</div>
                            <div class="frame"><span class="tooltip top">This is an AI generated image</span></div>
                            <div class="ghost">“This is AI”</div>
                        </div>
                    </div>
                    <div class="sub">Example layout — actual images load in the game.</div>
                </div>

                <!-- 9-Grid entry card BELOW the preview -->
                <div class="evil-cta small">
                    <a class="card" href="grid.html" title="Try the 9-Grid challenge">
                        <div class="label">9-Grid</div>
                        <div class="frame">
                            <img src="images/evil_laugh.gif" alt="Start 9-Grid mode">
                        </div>
                        <div class="cta-text">Start 9-Grid</div>
                    </a>
                </div>
            </div>


            <!-- Mini visual preview (unchanged) -->
            <div class="preview" aria-hidden="true">
                <div class="cards">
                    <div class="card">
                        <div class="label">A</div>
                        <div class="frame"><span class="tooltip">This is a real photo</span></div>
                        <div class="ghost">“This is AI”</div>
                    </div>
                    <div class="card">
                        <div class="label">B</div>
                        <div class="frame"><span class="tooltip top">This is an AI generated image</span></div>
                        <div class="ghost">“This is AI”</div>
                    </div>
                </div>
                <div class="sub">Example layout — actual images load in the game.</div>
            </div>
</div>
        </section>

        <footer>
          Tip: you can also use <span class="kbd">?shuffle=false</span> on the game page URL for testing left/right consistency.
        </footer>
      </div>
    </div>
  </div>

  <!-- Preview loader -->
  <script>
    (function () {
      function toURL(p) {
        if (/^(https?:)?\/\//i.test(p)) return p;
        const clean = String(p).replace(/^\//, '');
        return new URL(clean, document.baseURI).toString();
      }

      function resolveSrc(entry, label, category) {
        const v = typeof entry === 'string' ? entry : (entry?.file ?? entry?.src ?? '');
        if (!v) return '';
        if (/^(https?:)?\/\//i.test(v)) return v;
        if (v.startsWith('/')) return toURL(v);
        if (v.startsWith('images/')) return toURL(v);
        if (v.includes('/') && !v.startsWith('images/')) return toURL(`images/${v}`);
        const folder = label === 'ai' ? 'images/ai' : 'images/real';
        const catPart = category ? `/${category}` : '';
        return toURL(`${folder}${catPart}/${v}`);
      }

      function pickFirst(manifest, label) {
        for (const cat of Object.keys(manifest || {})) {
          const bucket = manifest[cat] || {};
          const arr = Array.isArray(bucket[label]) ? bucket[label] : [];
          if (arr.length) return { src: resolveSrc(arr[0], label, cat), cat };
        }
        return null;
      }

      async function loadPreview() {
        try {
          const res = await fetch(toURL('images/manifest.json'), { cache: 'no-store' });
          if (!res.ok) throw new Error(`Could not load images/manifest.json (HTTP ${res.status})`);
          const manifest = await res.json();

          const realPick = pickFirst(manifest, 'real');
          const aiPick = pickFirst(manifest, 'ai');

          const A = document.querySelector('.preview .cards .card:nth-child(1) .frame');
          const B = document.querySelector('.preview .cards .card:nth-child(2) .frame');

          if (A && realPick?.src) {
            const img = new Image();
            img.alt = 'Example real';
            img.src = realPick.src;
            A.prepend(img);
          }
          if (B && aiPick?.src) {
            const img = new Image();
            img.alt = 'Example AI';
            img.src = aiPick.src;
            B.prepend(img);
          }
        } catch (e) { console.error(e); }
      }
      loadPreview();
    })();
  </script>
</body>
</html>
